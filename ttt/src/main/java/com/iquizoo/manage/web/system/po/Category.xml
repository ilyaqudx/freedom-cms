<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">

<!--Auto Create,Don't Modify,you should copy some sql config,because only have insert,update,full query and delete by primaryKey
	@Author JiangZhiYong	@date 2015年4月21日 11:28:58-->
	
<mapper namespace="Category">

	<select id="getCategoryList"  resultType="Category" parameterType="Map">
		SELECT * FROM Category WHERE 1=1
		<if test="pId != null">
			and pId=#{pId}
		</if>
		<if test="order != null">
			order by ${order}
		</if>
		limit #{start},#{length}
	</select>

	<select id="getCategoryListCount" resultType="Integer" parameterType="Map">
		SELECT count(*) FROM Category WHERE 1=1
		<if test="pId != null">
			and pId=#{pId}
		</if>
	</select>

	<select id="getAllCategory" resultType="Category">
		SELECT * FROM Category
	</select>

	<select id="getCategoryByPid" resultType="Category">
		SELECT * FROM Category WHERE pId=#{id}
	</select>

	<insert id="addCategory" parameterType="Category">
		INSERT INTO Category(
		id
		<if test="name != null">
			,name
		</if>
		<if test="url != null">
			,url
		</if>
		<if test="sort != null">
			,sort
		</if>
		<if test="pId != null">
			,pId
		</if>
		)VALUES(
		#{id}
		<if test="name != null">
			,#{name}
		</if>
		<if test="url != null">
			,#{url}
		</if>
		<if test="sort != null">
			,#{sort}
		</if>
		<if test="pId != null">
			,#{pId}
		</if>
		)
	</insert>

	<update id="updateCategory" parameterType="Category">
		UPDATE Category
		SET 
		id = #{id}
		<if test="name != null">
			,name = #{name}
		</if>
		<if test="url != null">
			,url = #{url}
		</if>
		<if test="sort != null">
			,sort = #{sort}
		</if>
		<if test="pId != null">
			,pId = #{pId}
		</if>
		WHERE 
		id=#{id}
		
	</update>

	<delete id="deleteCategoryByKey" parameterType="Category">
	    DELETE FROM Category 
		WHERE 
		id=#{id}
	</delete>

</mapper>